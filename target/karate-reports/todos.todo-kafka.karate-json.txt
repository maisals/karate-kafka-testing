{"failedCount":0,"prefixedPath":"classpath:todos\/todo-kafka.feature","packageQualifiedName":"todos.todo-kafka","loopIndex":-1,"relativePath":"todos\/todo-kafka.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":46555208,"millis":46.555208,"status":"passed"},"step":{"background":true,"line":4,"prefix":"*","index":0,"text":"def Config = Java.type('com.example.karate.config.KarateConfig')"}},{"result":{"nanos":143078458,"millis":143.078458,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":1,"text":"karate.callSingle('classpath:common\/server-setup.feature')"},"stepLog":"21:34:34.037 << lock released, cached callSingle: classpath:common\/server-setup.feature\n","callResults":[{"failedCount":0,"prefixedPath":"classpath:common\/server-setup.feature","packageQualifiedName":"common.server-setup","loopIndex":-1,"relativePath":"common\/server-setup.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":682166,"millis":0.682166,"status":"passed"},"step":{"line":5,"prefix":"*","index":0,"text":"def Config = Java.type('com.example.karate.config.KarateConfig')"},"stepLog":"21:34:33.910 >> lock acquired, begin callSingle: classpath:common\/server-setup.feature\n"},{"result":{"nanos":1485000,"millis":1.485,"status":"passed"},"step":{"line":6,"prefix":"*","index":1,"text":"def kafkaBootstrap = Config.getKafkaBootstrap()"}},{"result":{"nanos":604250,"millis":0.60425,"status":"passed"},"step":{"line":7,"prefix":"*","index":2,"text":"def kafkaTopic = Config.getKafkaTopic()"}},{"result":{"nanos":2601708,"millis":2.601708,"status":"passed"},"step":{"line":8,"prefix":"*","index":3,"text":"def port = Config.getApiPort()"}},{"result":{"nanos":730709,"millis":0.730709,"status":"passed"},"step":{"line":9,"prefix":"*","index":4,"text":"def TodoMockServer = Java.type('com.mock.TodoMockServer')"}},{"result":{"nanos":15877542,"millis":15.877542,"status":"passed"},"step":{"line":10,"prefix":"*","index":5,"text":"def server = new TodoMockServer(port, kafkaBootstrap, kafkaTopic)"}},{"result":{"nanos":98530625,"millis":98.530625,"status":"passed"},"step":{"line":11,"prefix":"*","index":6,"text":"server.start()"}}],"line":4,"description":"","durationMillis":120.512,"failed":false,"tags":["ignore"],"executorName":"main","name":"Start todo server","startTime":1761510873916,"refId":"[1:4]","endTime":1761510874037,"exampleIndex":-1}],"callDepth":1,"name":"Mock Server Setup","description":"","resultDate":"2025-10-26 09:34:38 PM","durationMillis":120.512,"passedCount":1}]},{"result":{"nanos":948750,"millis":0.94875,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":2,"text":"def kafkaConsumer = Java.type('com.example.karate.helpers.KafkaConsumerHelper')"}},{"result":{"nanos":365916,"millis":0.365916,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":3,"text":"def kafkaBootstrap = Config.getKafkaBootstrap()"}},{"result":{"nanos":343667,"millis":0.343667,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":4,"text":"def kafkaTopic = Config.getKafkaTopic()"}},{"result":{"nanos":588083,"millis":0.588083,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":5,"text":"def kafkaTimeout = Config.getKafkaTimeout()"}},{"result":{"nanos":435291,"millis":0.435291,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":6,"text":"url Config.getApiUrl()"}},{"result":{"nanos":200250,"millis":0.20025,"status":"passed"},"step":{"line":13,"prefix":"Given","index":0,"text":"path 'todos'"}},{"result":{"nanos":200833,"millis":0.200833,"status":"passed"},"step":{"line":14,"prefix":"And","index":1,"text":"request 'First'"}},{"result":{"nanos":689881791,"millis":689.881791,"status":"passed"},"step":{"line":15,"prefix":"When","index":2,"text":"method Post"},"stepLog":"21:34:34.204 request:\n1 > POST http:\/\/localhost:8080\/todos\n1 > Content-Type: text\/plain; charset=UTF-8\n1 > Content-Length: 5\n1 > Host: localhost:8080\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.9)\n1 > Accept-Encoding: gzip,deflate\nFirst\n\n21:34:34.732 response time in milliseconds: 527\n1 < 200\n1 < Date: Sun, 26 Oct 2025 20:34:34 GMT\n1 < Content-Type: application\/json\n1 < Transfer-Encoding: chunked\n1 < Server: Jetty(9.4.48.v20220622)\n{\"id\":\"abfaf4f5-df65-4c46-8d48-e0ecda2c98ab\",\"title\":\"First\",\"complete\":false}\n\n"},{"result":{"nanos":16333,"millis":0.016333,"status":"passed"},"step":{"line":16,"prefix":"Then","index":3,"text":"status 200"}},{"result":{"nanos":20066833,"millis":20.066833,"status":"passed"},"step":{"line":17,"prefix":"*","index":4,"text":"match response == { id: '#string', title: 'First', complete: false }"}},{"result":{"nanos":2496959,"millis":2.496959,"status":"passed"},"step":{"line":18,"prefix":"*","index":5,"text":"def firstId = response.id"}},{"result":{"nanos":5125000,"millis":5.125,"status":"passed"},"step":{"comments":["# Newly created todo by id"],"line":21,"prefix":"Given","index":6,"text":"path 'todos\/' + firstId"}},{"result":{"nanos":5888000,"millis":5.888,"status":"passed"},"step":{"line":22,"prefix":"When","index":7,"text":"method Get"},"stepLog":"21:34:34.763 request:\n2 > GET http:\/\/localhost:8080\/todos\/abfaf4f5-df65-4c46-8d48-e0ecda2c98ab\n2 > Host: localhost:8080\n2 > Connection: Keep-Alive\n2 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.9)\n2 > Accept-Encoding: gzip,deflate\n\n\n21:34:34.767 response time in milliseconds: 4\n2 < 200\n2 < Date: Sun, 26 Oct 2025 20:34:34 GMT\n2 < Content-Type: application\/json\n2 < Transfer-Encoding: chunked\n2 < Server: Jetty(9.4.48.v20220622)\n{\"id\":\"abfaf4f5-df65-4c46-8d48-e0ecda2c98ab\",\"title\":\"First\",\"complete\":false}\n\n"},{"result":{"nanos":8125,"millis":0.008125,"status":"passed"},"step":{"line":23,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":1129750,"millis":1.12975,"status":"passed"},"step":{"line":24,"prefix":"*","index":9,"text":"match response == { id: '#(firstId)', title: 'First', complete: false }"}},{"result":{"nanos":182041,"millis":0.182041,"status":"passed"},"step":{"comments":["# Get all todos and verify that the newly created todo is in the list"],"line":27,"prefix":"Given","index":10,"text":"path 'todos'"}},{"result":{"nanos":5936125,"millis":5.936125,"status":"passed"},"step":{"line":28,"prefix":"When","index":11,"text":"method Get"},"stepLog":"21:34:34.770 request:\n3 > GET http:\/\/localhost:8080\/todos\n3 > Host: localhost:8080\n3 > Connection: Keep-Alive\n3 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.9)\n3 > Accept-Encoding: gzip,deflate\n\n\n21:34:34.774 response time in milliseconds: 4\n3 < 200\n3 < Date: Sun, 26 Oct 2025 20:34:34 GMT\n3 < Content-Type: application\/json\n3 < Transfer-Encoding: chunked\n3 < Server: Jetty(9.4.48.v20220622)\n[{\"id\":\"abfaf4f5-df65-4c46-8d48-e0ecda2c98ab\",\"title\":\"First\",\"complete\":false}]\n\n"},{"result":{"nanos":6208,"millis":0.006208,"status":"passed"},"step":{"line":29,"prefix":"Then","index":12,"text":"status 200"}},{"result":{"nanos":525958,"millis":0.525958,"status":"passed"},"step":{"line":30,"prefix":"*","index":13,"text":"match response contains [{ id: '#(firstId)', title: 'First', complete: false }]"}},{"result":{"nanos":63416,"millis":0.063416,"status":"passed"},"step":{"comments":["# Create second todo"],"line":33,"prefix":"Given","index":14,"text":"path 'todos'"}},{"result":{"nanos":337625,"millis":0.337625,"status":"passed"},"step":{"line":34,"prefix":"And","index":15,"text":"request 'Second'"}},{"result":{"nanos":33240667,"millis":33.240667,"status":"passed"},"step":{"line":35,"prefix":"When","index":16,"text":"method Post"},"stepLog":"21:34:34.777 request:\n4 > POST http:\/\/localhost:8080\/todos\n4 > Content-Type: text\/plain; charset=UTF-8\n4 > Content-Length: 6\n4 > Host: localhost:8080\n4 > Connection: Keep-Alive\n4 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.9)\n4 > Accept-Encoding: gzip,deflate\nSecond\n\n21:34:34.809 response time in milliseconds: 32\n4 < 200\n4 < Date: Sun, 26 Oct 2025 20:34:34 GMT\n4 < Content-Type: application\/json\n4 < Transfer-Encoding: chunked\n4 < Server: Jetty(9.4.48.v20220622)\n{\"id\":\"2031e00d-495e-4837-8024-9c7d4f0b9016\",\"title\":\"Second\",\"complete\":false}\n\n"},{"result":{"nanos":7292,"millis":0.007292,"status":"passed"},"step":{"line":36,"prefix":"Then","index":17,"text":"status 200"}},{"result":{"nanos":295167,"millis":0.295167,"status":"passed"},"step":{"line":37,"prefix":"*","index":18,"text":"match response == { id: '#string', title: 'Second', complete: false }"}},{"result":{"nanos":562667,"millis":0.562667,"status":"passed"},"step":{"line":38,"prefix":"*","index":19,"text":"def secondId = response.id"}},{"result":{"nanos":149667,"millis":0.149667,"status":"passed"},"step":{"comments":["# Get all todos and verify that both the newly created ids are present"],"line":41,"prefix":"Given","index":20,"text":"path 'todos'"}},{"result":{"nanos":5052917,"millis":5.052917,"status":"passed"},"step":{"line":42,"prefix":"When","index":21,"text":"method Get"},"stepLog":"21:34:34.811 request:\n5 > GET http:\/\/localhost:8080\/todos\n5 > Host: localhost:8080\n5 > Connection: Keep-Alive\n5 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.9)\n5 > Accept-Encoding: gzip,deflate\n\n\n21:34:34.815 response time in milliseconds: 4\n5 < 200\n5 < Date: Sun, 26 Oct 2025 20:34:34 GMT\n5 < Content-Type: application\/json\n5 < Transfer-Encoding: chunked\n5 < Server: Jetty(9.4.48.v20220622)\n[{\"id\":\"abfaf4f5-df65-4c46-8d48-e0ecda2c98ab\",\"title\":\"First\",\"complete\":false},{\"id\":\"2031e00d-495e-4837-8024-9c7d4f0b9016\",\"title\":\"Second\",\"complete\":false}]\n\n"},{"result":{"nanos":8584,"millis":0.008584,"status":"passed"},"step":{"line":43,"prefix":"Then","index":22,"text":"status 200"}},{"result":{"nanos":1265125,"millis":1.265125,"status":"passed"},"step":{"line":44,"prefix":"*","index":23,"text":"match response contains [{ id: '#(firstId)', title: 'First', complete: false },{ id: '#(secondId)', title: 'Second', complete: false }]"}}],"executorName":"main","line":12,"name":"Simple crud flow","description":"","durationMillis":964.962706,"startTime":1761510873846,"failed":false,"refId":"[1:12]","endTime":1761510874817,"exampleIndex":-1},{"sectionIndex":1,"stepResults":[{"result":{"nanos":589000,"millis":0.589,"status":"passed"},"step":{"background":true,"line":4,"prefix":"*","index":0,"text":"def Config = Java.type('com.example.karate.config.KarateConfig')"}},{"result":{"nanos":542166,"millis":0.542166,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":1,"text":"karate.callSingle('classpath:common\/server-setup.feature')"}},{"result":{"nanos":459791,"millis":0.459791,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":2,"text":"def kafkaConsumer = Java.type('com.example.karate.helpers.KafkaConsumerHelper')"}},{"result":{"nanos":801333,"millis":0.801333,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":3,"text":"def kafkaBootstrap = Config.getKafkaBootstrap()"}},{"result":{"nanos":383834,"millis":0.383834,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":4,"text":"def kafkaTopic = Config.getKafkaTopic()"}},{"result":{"nanos":320250,"millis":0.32025,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":5,"text":"def kafkaTimeout = Config.getKafkaTimeout()"}},{"result":{"nanos":252958,"millis":0.252958,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":6,"text":"url Config.getApiUrl()"}},{"result":{"nanos":46666,"millis":0.046666,"status":"passed"},"step":{"line":48,"prefix":"Given","index":0,"text":"path 'todos'"}},{"result":{"nanos":236625,"millis":0.236625,"status":"passed"},"step":{"line":49,"prefix":"And","index":1,"text":"request 'ValidateMessage'"}},{"result":{"nanos":60990792,"millis":60.990792,"status":"passed"},"step":{"line":50,"prefix":"When","index":2,"text":"method Post"},"stepLog":"21:34:34.843 request:\n1 > POST http:\/\/localhost:8080\/todos\n1 > Content-Type: text\/plain; charset=UTF-8\n1 > Content-Length: 15\n1 > Host: localhost:8080\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.9)\n1 > Accept-Encoding: gzip,deflate\nValidateMessage\n\n21:34:34.888 response time in milliseconds: 45\n1 < 200\n1 < Date: Sun, 26 Oct 2025 20:34:34 GMT\n1 < Content-Type: application\/json\n1 < Transfer-Encoding: chunked\n1 < Server: Jetty(9.4.48.v20220622)\n{\"id\":\"42bef41a-d3e2-42e9-bda7-5247366a2660\",\"title\":\"ValidateMessage\",\"complete\":false}\n\n"},{"result":{"nanos":7209,"millis":0.007209,"status":"passed"},"step":{"line":51,"prefix":"Then","index":3,"text":"status 200"}},{"result":{"nanos":3704900542,"millis":3704.900542,"status":"passed"},"step":{"line":52,"prefix":"*","index":4,"text":"def messages = kafkaConsumer.consumeMessages(kafkaBootstrap, kafkaTopic, kafkaTimeout)"}},{"result":{"nanos":14636000,"millis":14.636,"status":"passed"},"step":{"line":53,"prefix":"*","index":5,"text":"def messagesParsed = karate.map(messages, function(msg){ return JSON.parse(msg) })"}},{"result":{"nanos":1219333,"millis":1.219333,"status":"passed"},"step":{"line":54,"prefix":"*","index":6,"text":"match messagesParsed[*] contains { id: '#(response.id)', title: 'ValidateMessage', complete: false }"}}],"executorName":"main","line":47,"name":"Kafka event validation","description":"","durationMillis":3785.386499,"startTime":1761510874824,"failed":false,"refId":"[2:47]","endTime":1761510878609,"exampleIndex":-1}],"callDepth":0,"name":"CRUD flow with Kafka integration","description":"","resultDate":"2025-10-26 09:34:38 PM","durationMillis":4750.349205,"passedCount":2}